{"version":3,"sources":["common/storage/adaptor/fileStorage.js"],"names":["path","require","fs","module","exports","settings","save","bucket","key","content","Promise","resolve","reject","writeFile","join","userDir","JSON","stringify","err","data","load","readFile","parse"],"mappings":";;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,KAAKD,QAAQ,IAAR,CAAT;;AAEAE,OAAOC,OAAP,GAAiB,UAASC,QAAT,EAAmB;AACnC,QAAO;AACNC,QAAM,cAASC,MAAT,EAAiBC,GAAjB,EAAsBC,OAAtB,EAA+B;AACpC,UAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCV,OAAGW,SAAH,CAAcb,KAAKc,IAAL,CAAUT,SAASU,OAAnB,EAA4BR,MAA5B,EAAoCC,MAAM,OAA1C,CAAd,EAAkEQ,KAAKC,SAAL,CAAeR,OAAf,CAAlE,EAA2F,UAASS,GAAT,EAAcC,IAAd,EAAoB;AAC9G,SAAGD,GAAH,EAAQ,OAAON,OAAOM,GAAP,CAAP;AACRP,aAAQQ,IAAR;AACA,KAHD;AAIA,IALM,CAAP;AAMA,GARK;AASNC,QAAM,cAASb,MAAT,EAAiBC,GAAjB,EAAsB;AAC3B,UAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCV,OAAGmB,QAAH,CAAYrB,KAAKc,IAAL,CAAUT,SAASU,OAAnB,EAA4BR,MAA5B,EAAoCC,MAAM,OAA1C,CAAZ,EAAgE,UAASU,GAAT,EAAcC,IAAd,EAAoB;AACnF,SAAGD,GAAH,EAAQ,OAAON,OAAOM,GAAP,CAAP;AACRP,aAASK,KAAKM,KAAL,CAAWH,IAAX,CAAT;AACA,KAHD;AAIA,IALM,CAAP;AAMA;AAhBK,EAAP;AAkBA,CAnBD","file":"fileStorage.js","sourcesContent":["var path = require('path');\nvar fs = require('fs');\n\nmodule.exports = function(settings) {\n\treturn {\n\t\tsave: function(bucket, key, content) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tfs.writeFile( path.join(settings.userDir, bucket, key + '.json'), JSON.stringify(content), function(err, data) {\n\t\t\t\t\tif(err) return reject(err);\n\t\t\t\t\tresolve(data);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tload: function(bucket, key) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tfs.readFile(path.join(settings.userDir, bucket, key + '.json'), function(err, data) {\n\t\t\t\t\tif(err) return reject(err);\n\t\t\t\t\tresolve( JSON.parse(data) );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}"]}
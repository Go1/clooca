{"version":3,"sources":["common/storage/adaptor/localStorage.js"],"names":["module","exports","settings","save","bucket","key","content","Promise","resolve","reject","result","window","localStorage","setItem","JSON","stringify","load","getItem","parse","delete","removeItem","list","results","Object","keys","filter","indexOf","map","id","replace","result2"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB,UAASC,QAAT,EAAmB;AACnC,QAAO;AACNC,QAAM,cAASC,MAAT,EAAiBC,GAAjB,EAAsBC,OAAtB,EAA+B;AACpC,UAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,QAAIC,SAASC,OAAOC,YAAP,CAAoBC,OAApB,CAA4BT,SAAO,GAAP,GAAWC,GAAvC,EAA4CS,KAAKC,SAAL,CAAeT,OAAf,CAA5C,CAAb;AACAE,YAAQE,MAAR;AACA,IAHM,CAAP;AAIA,GANK;AAONM,QAAM,cAASZ,MAAT,EAAiBC,GAAjB,EAAsB;AAC3B,UAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,QAAIC,SAASC,OAAOC,YAAP,CAAoBK,OAApB,CAA4Bb,SAAO,GAAP,GAAWC,GAAvC,CAAb;AACAG,YAAQM,KAAKI,KAAL,CAAWR,MAAX,CAAR;AACA,IAHM,CAAP;AAIA,GAZK;AAaNS,UAAQ,iBAASf,MAAT,EAAiBC,GAAjB,EAAsB;AAC7B,UAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCE,WAAOC,YAAP,CAAoBQ,UAApB,CAA+BhB,SAAO,GAAP,GAAWC,GAA1C;AACAG;AACA,IAHM,CAAP;AAIA,GAlBK;AAmBNa,QAAM,cAASjB,MAAT,EAAiB;AACtB,UAAO,IAAIG,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,QAAIa,UAAUC,OAAOC,IAAP,CAAYb,OAAOC,YAAnB,EAAiCa,MAAjC,CAAwC,UAACpB,GAAD,EAAO;AAC5D,YAAOA,IAAIqB,OAAJ,CAAYtB,MAAZ,KAAuB,CAA9B;AACA,KAFa,EAEXuB,GAFW,CAEP,UAACtB,GAAD,EAAO;AACb,SAAIuB,KAAKvB,IAAIwB,OAAJ,CAAYzB,SAAO,GAAnB,EAAwB,EAAxB,CAAT;AACA,SAAIM,SAASC,OAAOC,YAAP,CAAoBK,OAApB,CAA4BZ,GAA5B,CAAb;AACA,SAAIyB,UAAUhB,KAAKI,KAAL,CAAWR,MAAX,CAAd;AACAoB,aAAQF,EAAR,GAAaA,EAAb;AACA,YAAOE,OAAP;AACA,KARa,CAAd;AASAtB,YAAQc,OAAR;AACA,IAXM,CAAP;AAYA;AAhCK,EAAP;AAkCA,CAnCD","file":"localStorage.js","sourcesContent":["module.exports = function(settings) {\n\treturn {\n\t\tsave: function(bucket, key, content) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tvar result = window.localStorage.setItem(bucket+'-'+key, JSON.stringify(content));\n\t\t\t\tresolve(result);\n\t\t\t});\n\t\t},\n\t\tload: function(bucket, key) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tvar result = window.localStorage.getItem(bucket+'-'+key);\n\t\t\t\tresolve(JSON.parse(result));\n\t\t\t});\n\t\t},\n\t\tdelete: function(bucket, key) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\twindow.localStorage.removeItem(bucket+'-'+key);\n\t\t\t\tresolve();\n\t\t\t});\n\t\t},\n\t\tlist: function(bucket) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tvar results = Object.keys(window.localStorage).filter((key)=>{\n\t\t\t\t\treturn key.indexOf(bucket) == 0;\n\t\t\t\t}).map((key)=>{\n\t\t\t\t\tvar id = key.replace(bucket+'-', '');\n\t\t\t\t\tvar result = window.localStorage.getItem(key);\n\t\t\t\t\tvar result2 = JSON.parse(result);\n\t\t\t\t\tresult2.id = id;\n\t\t\t\t\treturn result2;\n\t\t\t\t});\n\t\t\t\tresolve(results);\n\t\t\t});\n\t\t}\n\t}\n}"]}
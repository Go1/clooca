{"version":3,"sources":["server/core/cc/rest.js"],"names":["registry","require","module","exports","req","res","moduleName","params","methodName","Object","assign","query","body","getModule","recvRequest","then","content","json","err","catch","message"],"mappings":";;AAAA,IAAIA,WAAWC,QAAQ,+BAAR,CAAf;;AAEAC,OAAOC,OAAP,GAAiB,YAAW;AAC3B,QAAO,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACzB,MAAIC,aAAaF,IAAIG,MAAJ,CAAWD,UAA5B;AACA,MAAIE,aAAaJ,IAAIG,MAAJ,CAAWC,UAA5B;AACA,MAAID,SAASE,OAAOC,MAAP,CAAc,EAAd,EAAkBN,IAAIG,MAAtB,EAA8BH,IAAIO,KAAlC,EAAyCP,IAAIQ,IAA7C,CAAb;AACAZ,WAASa,SAAT,CAAmBP,UAAnB,EAA+BQ,WAA/B,CAA2CN,UAA3C,EAAuDD,MAAvD,EAA+DQ,IAA/D,CAAoE,UAACC,OAAD,EAAa;AAChFX,OAAIY,IAAJ,CAAS;AACRC,SAAK,IADG;AAERF,aAASA;AAFD,IAAT;AAIA,GALD,EAKGG,KALH,CAKS,UAACD,GAAD,EAAS;AACjBb,OAAIY,IAAJ,CAAS;AACRC,SAAKA,IAAIE;AADD,IAAT;AAGA,GATD;AAUA,EAdD;AAeA,CAhBD","file":"rest.js","sourcesContent":["var registry = require('../../../common/core/registry');\n\nmodule.exports = function() {\n\treturn function(req, res) {\n\t\tvar moduleName = req.params.moduleName;\n\t\tvar methodName = req.params.methodName;\n\t\tvar params = Object.assign({}, req.params, req.query, req.body);\n\t\tregistry.getModule(moduleName).recvRequest(methodName, params).then((content) => {\n\t\t\tres.json({\n\t\t\t\terr: null,\n\t\t\t\tcontent: content\n\t\t\t});\n\t\t}).catch((err) => {\n\t\t\tres.json({\n\t\t\t\terr: err.message\n\t\t\t});\n\t\t});\n\t}\n}"]}
{"version":3,"sources":["client/components/project/list.js"],"names":["React","require","Link","project","ProjectList","createClass","getInitialState","projects","createMode","componentWillMount","refresh","setState","bind","console","log","clooca","list","then","componentDidMount","componentDidUpdate","componentWillUnmount","onNewProjectClicked","onCreateProjectClicked","name","refs","value","save","onCancelClicked","openSettings","e","location","hash","id","openEditor","stopPropagation","deleteProject","p","delete","render","self","projectList","state","map","module","exports"],"mappings":"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","file":"list.js","sourcesContent":["var React = require('react');\nvar Link = require('react-router').Link\nvar project = require('../../../common/core/project');\n\nlet ProjectList = React.createClass({\n\n  getInitialState: function () {\n    return {\n    \tprojects: [],\n    \tcreateMode: false\n    };\n  },\n\n  componentWillMount: function() {\n  \tthis.refresh();\n  },\n\n  refresh: function() {\n  \tlet setState = this.setState.bind(this);\n    console.log(clooca);\n  \tproject.list(clooca).then((projects)=>{\n  \t\tsetState({\n  \t\t\tprojects: projects\n  \t\t});\n  \t});\n  },\n\n  componentDidMount: function () {\n  },\n\n  componentDidUpdate: function () {\n  },\n\n  componentWillUnmount : function() {\n  },\n\n  onNewProjectClicked: function() {\n  \tthis.setState({\n  \t\tcreateMode: true\n  \t});\n  },\n\n  onCreateProjectClicked: function() {\n  \tvar name = this.refs.name.value;\n  \tproject.save(clooca, name, {name: name}).then(()=>{\n\t  \tthis.refresh();\n\t  \tthis.setState({\n\t  \t\tcreateMode: false\n\t  \t});\n  \t});\n  },\n\n  onCancelClicked: function() {\n  \tthis.setState({\n  \t\tcreateMode: false\n  \t});\n  },\n\n  openSettings: function(project, e) {\n  \tlocation.hash = `/project/${project.id}/settings`;\n  },\n\n  openEditor: function(project, e) {\n  \tlocation.hash = `/project/${project.id}`;\n  \te.stopPropagation();\n  },\n\n  deleteProject: function(p, e) {\n  \te.stopPropagation();\n  \tproject.delete(clooca, p.id).then(()=>{\n\t  \tthis.refresh();\n  \t});\n  },\n\n  render: function () {\n    var self = this;\n    var projectList = this.state.projects.map((project) => {\n      return (<div className=\"projectlist-item\" onClick={this.openSettings.bind(this, project)}><div className=\"projectlist-item-title\" >{project.name}</div><a className=\"projectlist-item-editor\" onClick={this.openEditor.bind(this, project)}>open editor</a><a className=\"projectlist-item-delete\" onClick={this.deleteProject.bind(this, project)}>delete</a><div className=\"projectlist-item-clear\"></div></div>)\n    });\n\n    return (\n    \t<div className=\"projectlist-wrapper\">\n\t    \t{projectList}\n\t    \t<div>\n\t\t\t\t{this.state.createMode?\n\t\t\t\t\t(<div><input ref=\"name\" type=\"text\"/><button onClick={this.onCancelClicked}>cancel</button><button onClick={this.onCreateProjectClicked}>Create Project</button></div>):\n\t\t    \t\t(<button onClick={this.onNewProjectClicked}>New Project</button>)\n\t\t\t\t}\n\n\t    \t</div>\n    \t</div>\n    );\n  }\n});\n\nmodule.exports = ProjectList;"]}
{"version":3,"sources":["client/components/project/settings.js"],"names":["React","require","Link","project","ProjectSettings","createClass","getInitialState","data","componentWillMount","setState","bind","loadProject","clooca","getStorage","props","params","projectId","then","refs","settings","value","JSON","stringify","componentDidMount","componentDidUpdate","componentWillUnmount","save","parse","saveProject","catch","err","console","error","onNameChange","e","state","name","target","onRequiredChange","index","required","uri","onModelsChange","models","onPluginsChange","key","plugin","render","plugins","module","exports"],"mappings":"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","file":"settings.js","sourcesContent":["var React = require('react');\nvar Link = require('react-router').Link;\n\nvar project = require('../../../common/storage/project');\n\n\n\nlet ProjectSettings = React.createClass({\n\n  getInitialState: function () {\n    return {\n      data: \"\"\n    };\n  },\n\n  componentWillMount: function() {\n  \tlet setState = this.setState.bind(this);\n    project.loadProject(clooca.getStorage(), this.props.params.projectId).then((data)=>{\n    \tthis.refs.settings.value = JSON.stringify(data, null, 2);\n      setState({\n        data: data\n      });\n    });\n\n  },\n\n  componentDidMount: function () {\n  },\n\n  componentDidUpdate: function () {\n  },\n\n  componentWillUnmount : function() {\n  },\n\n  save: function() {\n  \tvar settings = JSON.parse(this.refs.settings.value);\n    project.saveProject(clooca.getStorage(), this.props.params.projectId, settings).then(()=>{\n    }).catch((err)=>{\n      console.error(err);\n    });\n  },\n\n  onNameChange: function(e) {\n    var data = this.state.data;\n    data.name = e.target.value;\n    this.setState({\n      data: data\n    });\n  },\n\n  onRequiredChange: function(index, e) {\n    var data = this.state.data;\n    data.required[index].uri = e.target.value;\n    this.setState({\n      data: data\n    });\n  },\n\n  onModelsChange: function(index, e) {\n    var data = this.state.data;\n    data.models[index].uri = e.target.value;\n    this.setState({\n      data: data\n    });\n  },\n\n  onPluginsChange: function(key, e) {\n    var data = this.state.data;\n    data.plugin[key] = JSON.parse(e.target.value);\n    this.setState({\n      data: data\n    });\n  },\n\n  render: function () {\n    var required = this.state.data.required || [];\n    var models = this.state.data.models || [];\n    var plugins = this.state.data.plugin || {};\n    return (\n    \t<div className=\"settings-wrapper\">\n    \t<div><Link to=\"/projects\">←Return</Link></div>\n    \t<div><textarea cols=\"50\" rows=\"16\" ref=\"settings\"/></div>\n    \t<div><button onClick={this.save}>Save</button></div>\n    \t</div>\n    );\n      /*\n      <div><input onChange={this.onNameChange} value={this.state.data.name}/></div>\n      <div>{required.map((m, index)=>{return (<input onChange={this.onRequiredChange.bind(this, index)} value={m.uri}/>);})}</div>\n      <div>{models.map((m, index)=>{return (<input onChange={this.onModelsChange.bind(this, index)} value={m.uri}/>);})}</div>\n      <div>{Object.keys(plugins).map((key, index)=>{return (<input onChange={this.onPluginsChange.bind(this, key)} value={JSON.stringify(plugins[key])}/>);})}</div>\n      */\n\n  }\n});\n\nmodule.exports = ProjectSettings;"]}
{"version":3,"sources":["client/components/modal/addObject.js"],"names":["React","require","Modal","customStyles","content","top","left","right","bottom","marginRight","transform","backgroundColor","color","CreateModal","createClass","getInitialState","eClassNames","isOpen","afterOpenModal","closeModal","props","onClose","okModal","resourceSet","clooca","getModelInterface","getResourceSet","model","get","filter","r","uri","name","refs","value","eClassName","eClass","elements","_eclass","add","create","fireUpdate","componentWillReceiveProps","map","setState","render","options","state","module","exports"],"mappings":";;AAAA,IAAIA,QAAQC,QAAQ,OAAR,CAAZ;AACA,IAAIC,QAAQD,QAAQ,aAAR,CAAZ;;AAEA,IAAME,eAAe;AACnBC,WAAU;AACRC,SAAwB,KADhB;AAERC,UAAwB,KAFhB;AAGRC,WAAwB,MAHhB;AAIRC,YAAwB,MAJhB;AAKRC,iBAAwB,MALhB;AAMRC,eAAwB,uBANhB;AAORC,qBAAwB,SAPhB;AAQRC,WAAwB;AARhB;AADS,CAArB;;AAcA,IAAIC,cAAcb,MAAMc,WAAN,CAAkB;AAAA;;;AAElCC,mBAAiB,2BAAW;AAC1B,WAAO;AACNC,mBAAa,EADP;AAENC,cAAQ;AAFF,KAAP;AAID,GAPiC;;AASlCC,kBAAgB,0BAAW,CAC1B,CAViC;;AAYlCC,cAAY,sBAAW;AACtB,SAAKC,KAAL,CAAWC,OAAX;AACA,GAdiC;;AAgBlCC,WAAS,mBAAW;AAAA;;AAClB,QAAIC,cAAcC,OAAOC,iBAAP,GAA2BC,cAA3B,EAAlB;AACA,QAAIC,QAAQJ,YAAYK,GAAZ,CAAgB,WAAhB,EAA6BC,MAA7B,CAAoC,UAACC,CAAD,EAAK;AACnD,aAAOA,EAAEF,GAAF,CAAM,KAAN,KAAgB,MAAKR,KAAL,CAAWW,GAAlC;AACD,KAFW,EAET,CAFS,CAAZ;AAGD,QAAIC,OAAO,KAAKC,IAAL,CAAUD,IAAV,CAAeE,KAA1B;AACC,QAAIC,aAAa,KAAKF,IAAL,CAAUG,MAAV,CAAiBF,KAAlC;AACA,QAAIE,SAASb,YAAYc,QAAZ,CAAqB,QAArB,EAA+BR,MAA/B,CAAsC,UAACS,OAAD,EAAa;AAC9D,aAAOA,QAAQV,GAAR,CAAY,MAAZ,KAAuBO,UAA9B;AACD,KAFY,EAEV,CAFU,CAAb;;AAIAR,UAAMC,GAAN,CAAU,UAAV,EAAsBW,GAAtB,CAA0BH,OAAOI,MAAP,CAAc,EAACR,MAAKA,IAAN,EAAd,CAA1B;AACAR,WAAOC,iBAAP,GAA2BgB,UAA3B;AACD,SAAKrB,KAAL,CAAWC,OAAX;AACA,GA9BiC;;AAgClCqB,6BAA2B,qCAAW;AACpC,QAAInB,cAAcC,OAAOC,iBAAP,GAA2BC,cAA3B,EAAlB;AACA,QAAIV,cAAcO,YAAYc,QAAZ,CAAqB,QAArB,EAA+BM,GAA/B,CAAmC,UAACL,OAAD,EAAa;AAChE,aAAOA,QAAQV,GAAR,CAAY,MAAZ,CAAP;AACD,KAFiB,CAAlB;AAGD,SAAKgB,QAAL,CAAc;AACb5B,mBAAaA;AADA,KAAd;AAGA,GAxCiC;;AA0ClC6B,UAAQ,kBAAW;AACjB,QAAIC,UAAU,KAAKC,KAAL,CAAW/B,WAAX,CAAuB2B,GAAvB,CAA2B,UAACR,UAAD,EAAgB;AACvD,aAAQ;AAAA;AAAA,UAAQ,KAAKA,UAAb;AAA0BA;AAA1B,OAAR;AACD,KAFa,CAAd;AAGA,WACE;AAAA;AAAA;AACE;AAAC,aAAD;AAAA;AACE,kBAAQ,KAAKf,KAAL,CAAWH,MADrB;AAEE,uBAAa,KAAKC,cAFpB;AAGE,0BAAgB,KAAKC,UAHvB;AAIE,iBAAOhB,YAJT;AAME;AAAA;AAAA;AAAA;AAAA,SANF;AAQE;AAAA;AAAA,YAAK,WAAU,iBAAf;AACE;AAAA;AAAA,cAAM,WAAU,uBAAhB;AAAA;AAAA,WADF;AAEE;AAAA;AAAA,cAAK,WAAU,uBAAf;AACE;AAAA;AAAA,gBAAQ,KAAI,QAAZ;AAAsB2C;AAAtB;AADF;AAFF,SARF;AAcE;AAAA;AAAA,YAAK,WAAU,iBAAf;AACE;AAAA;AAAA,cAAM,WAAU,uBAAhB;AAAA;AAAA,WADF;AAEE;AAAA;AAAA,cAAK,WAAU,uBAAf;AACE,2CAAO,KAAI,MAAX,EAAkB,MAAK,MAAvB;AADF;AAFF,SAdF;AAoBE;AAAA;AAAA,YAAQ,SAAS,KAAKxB,OAAtB;AAAA;AAAA,SApBF;AAqBE;AAAA;AAAA,YAAQ,SAAS,KAAKH,UAAtB;AAAA;AAAA;AArBF;AADF,KADF;AA2BD;AAzEiC,CAAlB,CAAlB;;AA4EA6B,OAAOC,OAAP,GAAiBpC,WAAjB","file":"addObject.js","sourcesContent":["var React = require('react');\nvar Modal = require('react-modal');\n\nconst customStyles = {\n  content : {\n    top                   : '50%',\n    left                  : '50%',\n    right                 : 'auto',\n    bottom                : 'auto',\n    marginRight           : '-50%',\n    transform             : 'translate(-50%, -50%)',\n    backgroundColor       : '#272525',\n    color                 : '#fff'\n  }\n};\n\n\nvar CreateModal = React.createClass({\n\n  getInitialState: function() {\n    return {\n    \teClassNames: [],\n    \tisOpen: false\n    };\n  },\n\n  afterOpenModal: function() {\n  },\n\n  closeModal: function() {\n  \tthis.props.onClose();\n  },\n\n  okModal: function() {\n    var resourceSet = clooca.getModelInterface().getResourceSet();\n    var model = resourceSet.get('resources').filter((r)=>{\n      return r.get('uri') == this.props.uri;\n    })[0];\n  \tvar name = this.refs.name.value;\n    var eClassName = this.refs.eClass.value;\n    var eClass = resourceSet.elements('EClass').filter((_eclass) => {\n      return _eclass.get('name') == eClassName;\n    })[0];\n\n    model.get('contents').add(eClass.create({name:name}));\n    clooca.getModelInterface().fireUpdate()\n  \tthis.props.onClose();\n  },\n\n  componentWillReceiveProps: function() {\n    var resourceSet = clooca.getModelInterface().getResourceSet();\n    var eClassNames = resourceSet.elements('EClass').map((_eclass) => {\n      return _eclass.get('name');\n    });\n  \tthis.setState({\n  \t\teClassNames: eClassNames\n  \t});\n  },\n\n  render: function() {\n    var options = this.state.eClassNames.map((eClassName) => {\n      return (<option key={eClassName}>{eClassName}</option>);\n    });\n    return (\n      <div>\n        <Modal\n          isOpen={this.props.isOpen}\n          onAfterOpen={this.afterOpenModal}\n          onRequestClose={this.closeModal}\n          style={customStyles} >\n\n          <h2>インスタンス作成</h2>\n\n          <div className=\"core-modal-form\">\n            <span className=\"core-modal-form-label\">クラス名</span>\n            <div className=\"core-modal-form-input\">\n              <select ref=\"eClass\">{options}</select>\n            </div>\n          </div>\n          <div className=\"core-modal-form\">\n            <span className=\"core-modal-form-label\">作成するオブジェクトの名前</span>\n            <div className=\"core-modal-form-input\">\n              <input ref=\"name\" type=\"text\" />\n            </div>\n          </div>\n          <button onClick={this.okModal}>OK</button>\n          <button onClick={this.closeModal}>Cancel</button>\n        </Modal>\n      </div>\n    );\n  }\n});\n\nmodule.exports = CreateModal;"]}